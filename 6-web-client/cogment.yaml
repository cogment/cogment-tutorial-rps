
import:
  proto:
    - data.proto

commands:
  generate: >
    cogment generate --python_dir=./environment &&
    cogment generate --python_dir=./random_agent &&
    cogment generate --python_dir=./client --js_dir=web-client/src
  build: docker-compose build orchestrator environment random_agent
  start: docker-compose up orchestrator environment random_agent
  refresh-web-client: |
    docker-compose build web-client
    cogment run start-web-client
  build-web-client: |
    cd web-client
    npm i
    cd ..
    docker-compose build web-client grpcwebproxy
  start-web-client: docker-compose up web-client grpcwebproxy
  stop: docker-compose stop orchestrator environment random_agent web-client
  play: docker-compose run --rm client
  tail: docker-compose logs -f

environment:
  config_type: cogment_demo_rps.EnvironmentConfig

trial:
  config_type: cogment_demo_rps.TrialConfig
#  pre_hooks:
#    - grpc://configurator:9000


# Static configuration
actor_classes:
  - id: player
    action:
      space: cogment_demo_rps.Action
    observation:
      space: cogment_demo_rps.Observation


# Dynamic configuration (could be changed by a pre-hook)
trial_params:
  environment:
    endpoint: grpc://environment:9000
    config:
      target_score: 3
      games_count: 5
  actors:
    - name: player_1
      actor_class: player
      # implementation: random
      # endpoint: grpc://random_agent:9000
      implementation: human
      endpoint: client
    - name: player_2
      actor_class: player
      implementation: random
      endpoint: grpc://random_agent:9000